# 背景透過＆補正ブラシ＆クロップ機能付き 画像加工アプリ 仕様書

## 概要
画像の透過PNGを作成するWebアプリ。  
背景除去、ブラシ補正、クロップ機能を備え、作成画像はダウンロード可能。

## 主な機能

### 画像アップロード
- ローカルから画像を選択しCanvasに描画
- 対応形式：JPEG, PNG（背景透過も可）

### 背景除去（ざっくり除去）
- 背景除去アルゴリズムで、被写体以外を透過化
- 自動処理で完全に除去できない場合に備え、補正ブラシで編集可能

### 補正ブラシ機能
- **透過ブラシ**：塗った部分を透過化
- **復元ブラシ**：透過部分を元に戻す
- ブラシサイズ調整スライダー付き
- Undo / Redo（履歴管理）

### クロップ機能（石部分の切り抜き）
- **手動クロップ**：  
  - 「クロップ開始」→ドラッグで矩形選択
  - 選択外は半透明表示
  - 「クロップ適用」で切り抜き
  - キャンセル可
- **自動トリミング**：
  - 透過ピクセルを除外した最小外接矩形で自動切り抜き

### ダウンロード
- 完成画像をPNG形式でダウンロード
- ファイル名は `stone-YYYYMMDD-HHMMSS.png`
- **Safari/iOS対応**：
  - Safari/iOS系では先に空タブを開き、そこに`dataURL`で描画して保存可能に

---

## 画面UI構成
- 操作パネル
  - [画像アップロードボタン]
  - [背景除去ボタン]
  - [ブラシツール選択]
  - [ブラシサイズスライダー]
  - [クロップ開始／適用／キャンセルボタン]
  - [自動トリミングボタン]
  - [ダウンロードボタン]
- Canvas描画領域
  - ズーム・パン可能（将来的拡張）

---

## 技術仕様
- HTML5 Canvas API
- JavaScript（Vanilla）
- 背景除去アルゴリズム（簡易版／将来はMLベースに拡張可能）
- CSS FlexレイアウトでPC/タブレット両対応
- Safari/iOSダウンロード対策実装

---
